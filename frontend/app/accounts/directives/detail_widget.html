<dashboard-widget ng-if="vm.account" widget-name="'Account info'">
    <widget-header>
        <div class="widget-name">
            <i class="lilicon hl-company-icon"></i>
            <span ng-show="vm.settings.email.data.account.id">
                <a ui-sref="base.accounts.detail({ id: vm.settings.email.data.account.id })">{{ vm.account.name }}</a>
            </span>
            <span ng-show="!vm.settings.email.data.account">{{ vm.account.name }}</span>
        </div>
    </widget-header>

    <widget-filters>
        <a ng-href="{{ vm.tenant.primary_external_app_link.getUrl(vm.account.customer_id) }}" target="_blank" class="btn btn-circle btn-default" ng-if="vm.account.customer_id && vm.tenant.primary_external_app_link">
            <i class="fa fa-external-link fa-sm"></i>
            {{ vm.tenant.primary_external_app_link.name }}
        </a>
        <a href="https://freedom.voys.nl/quotes/create/" target="_blank" class="btn btn-circle btn-default" ng-if="!vm.account.customer_id && vm.tenant.isVoysNL()">
            <i class="fa fa-external-link fa-sm"></i>
            Write quote
        </a>
    </widget-filters>

    <widget-body>
        <div class="widget-content">
            <div class="scroll-body" slimscroll="{height: 200}">
                <!--<p ng-bind-html="(vm.account.description | parseUrls) || 'No description'"></p>-->
                <p editable-textarea="vm.account.description" e-rows="4" e-cols="100" onbeforesave="vm.updateModel($data, 'description')">{{ (vm.account.description | parseUrls) || 'No description' }}</p>

                <table class="table table-hover no-margin">
                    <tr ng-show="(vm.account.email_addresses | filter: {status: '!' + 0}).length">
                        <th>
                            <i class="fa">@</i>
                            Email
                        </th>
                        <td>
                            <editable-related model="vm.account" type="Account" field="email_addresses"></editable-related>
                        </td>
                    </tr>
                    <tr>
                        <th>
                            <i class="fa fa-phone"></i>
                            Phone
                        </th>
                        <td>
                            <editable-related model="vm.account" type="Account" field="phone_numbers"></editable-related>
                        </td>
                    </tr>
                    <tr>
                        <th>
                            <i class="fa fa-globe"></i>
                            Website
                        </th>
                        <td>
                            <editable-related model="vm.account" type="Account" field="websites"></editable-related>
                        </td>
                    </tr>
                    <tr ng-show="vm.account.assigned_to">
                        <th>
                            <i class="fa fa-child"></i>
                            Assigned to
                        </th>
                        <td>
                            <editable-select field="assigned_to" view-model="vm" type="Account" class="inline-selectable-text" select-options="{type: 'User', field: 'assignOptions', display: 'full_name'}">
                                {{ vm.account.assigned_to.full_name }}
                            </editable-select>
                        </td>
                    </tr>
                    <tr>
                        <th>
                            <i class="fa fa-map-marker"></i>
                            Address
                        </th>
                        <td>
                            <editable-related model="vm.account" type="Account" field="addresses"></editable-related>
                        </td>
                    </tr>
                    <tr ng-show="vm.account.social" ng-repeat="social in vm.account.social">
                        <th><i class="fa fa-{{ social.social_name | lowercase }}"></i> {{ social.social_name }}</th>
                        <td><a ng-href="{{ social.social_url }}" target="_blank">{{ social.social_profile }}</a></td>
                    </tr>
                    <tr ng-show="vm.account.tag">
                        <th>
                            <i class="fa fa-tag"></i>
                            Tags
                        </th>
                        <td>
                            <a class="btn btn-xs btn-default" ng-repeat="tag in vm.account.tag">
                                {{ tag }}
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </widget-body>
</dashboard-widget>
