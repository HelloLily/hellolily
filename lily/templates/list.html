{% extends 'page.html' %}

{% load media i18n %}

{% block css %}
{{ block.super }}
{% include_media 'tables.css' %}
{% endblock %}

{% block page-container %}
<div class="portlet">
    <div class="portlet-title">
         <div class="caption">{% block list-title %}{% endblock %}</div>
         <div class="actions">{% block list-actions %}{% endblock %}</div>
    </div>
    <div class="portlet-body">
        <table class="table table-striped table-bordered table-hover data-table">
            <thead><tr>{% block list-headings %}{% endblock %}</tr></thead>
            <tbody>
                {% block list %}
                    {% for item in object_list %}
                        <tr>
                            {% for column in columns %}
                                {% with ''|add:app_name|add:'/data-tables/'|add:column|add:'.html' as template_url %}
                                    {% include template_url %}
                                {% endwith %}
                            {% endfor %}
                        </tr>
                    {% endfor %}
                {% endblock %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ block.super }}
{% include_media 'tables.js' %}
<script>
$(function($){
    $('.page-content .data-table').dataTable({
        {% if data_tables_server_side %}
        'bServerSide': true,
        'sAjaxSource': '{{ data_tables_ajax_source }}',
        'aoColumns': {{ data_tables_columns }},
        'bFilter': {{ data_tables_show_search_field }},
        'fnDrawCallback': function() {
            App.initUniform();
        },
        {% else %}
        'aoColumnDefs': [
            {% block list-definition %}{% endblock %}
        ],
        {% endif %}
        'aLengthMenu': [
            [5, 15, 20, -1],
            [5, 15, 20, '{% trans 'All' %}'] // change per page values here
        ],
        // set the initial value
        'iDisplayLength': 20,
        'sPaginationType': 'bootstrap',
        'oLanguage': {
            'sLengthMenu': '_MENU_ records',
            'oPaginate': {
                'sPrevious': '{% trans 'Prev' %}',
                'sNext': '{% trans 'Next' %}'
            }
        },
        'bAutoWidth': false,
        'aaSorting': [[{{ order_by }}, '{{ sort_order }}']]
    });

    // modify table search input
    $('.page-content .dataTables_filter input').addClass("form-control input-small");
    // modify table per page dropdown
    $('.page-content .dataTables_length select').addClass("form-control input-xsmall");
    // initialize select2 dropdown
    $('.page-content .dataTables_length select').select2({minimumResultsForSearch: -1});
});
</script>
{% endblock %}

{% block modals %}
{{ block.super }}
<div class="hidden">
    <div id="confirm-delete" class="modal fade" tabindex="-1" role="dialog"></div>
</div>
{% endblock %}
